"use strict";(self.webpackChunkasync_stream_blog=self.webpackChunkasync_stream_blog||[]).push([[545],{319:function(e,t,a){a.r(t),a.d(t,{Head:function(){return E},default:function(){return g}});var n=a(8453),s=a(6540);function l(e){const t=Object.assign({p:"p",a:"a",blockquote:"blockquote",strong:"strong",br:"br",em:"em",h2:"h2",ul:"ul",li:"li",span:"span",math:"math",semantics:"semantics",mrow:"mrow",msub:"msub",mi:"mi",mn:"mn",mo:"mo",annotation:"annotation"},(0,n.RP)(),e.components);return s.createElement(s.Fragment,null,s.createElement(t.p,null,"I've been having a lot of fun working on ",s.createElement(t.a,{href:"https://github.com/hydro-project/hydro"},"Hydro"),"\nat AWS this fall.\nBut over the winter break I stepped away from coding and had the space to think ... mostly about\nfundamentals of long-time obsessions around concurrency, coordination\nand correctness specs."),"\n",s.createElement(t.p,null,"I don't have specific results to report here (yet :-)). Instead, I thought I'd share a conceptual contrast\nthat’s been clarifying a lot of my recent thinking"),"\n",s.createElement(t.blockquote,null,"\n",s.createElement(t.p,null,s.createElement(t.strong,null,"Algorithms compute functions."),s.createElement(t.br),"\n",s.createElement(t.strong,null,"Systems make promises about preventing futures.")),"\n"),"\n",s.createElement(t.p,null,"That sounds negative, but it's pretty on point. Most systems guarantees are prohibitions:\nstates that may never occur, histories that must not be observed, interleavings that are not allowed, etc.\nAnd in many systems, ",s.createElement(t.em,null,"the promising is an ongoing process"),": the set of promises evolves continually based\non the system's observable behavior in the outside world."),"\n",s.createElement(t.p,null,"A system’s job is not to produce a single correct output and stop; it’s to keep running ",s.createElement(t.em,null,"without\never crossing certain semantic lines"),"."),"\n",s.createElement(t.p,null,"This difference explains a lot of friction we see when we move ideas back and forth between algorithms and systems."),"\n",s.createElement(t.h2,null,"What Algorithms Do"),"\n",s.createElement(t.p,null,"When we write an algorithm, we have a pretty clear contract:"),"\n",s.createElement(t.ul,null,"\n",s.createElement(t.li,null,"You give me an input (possibly complex, possibly huge)."),"\n",s.createElement(t.li,null,"I produce an output."),"\n",s.createElement(t.li,null,"Correctness means the output corresponds to the function we set out to compute."),"\n"),"\n",s.createElement(t.p,null,"We might worry about efficiency, approximation, or even randomness — but fundamentally\nwe’re evaluating a function. The algorithm is allowed to wait to see all of its input;\nit doesn’t have to make irreversible choices until it’s ready."),"\n",s.createElement(t.p,null,"There’s a clarity to this world. It’s like working at a potter's wheel with the clay in front of you."),"\n",s.createElement(t.p,null,"That’s a comfortable world. Meaning is fixed by the problem statement; the algorithm’s job is to compute it."),"\n",s.createElement(t.h2,null,"What Systems Do"),"\n",s.createElement(t.p,null,'Systems are "online" -- they exist in time. They interact with an environment (clients, networks, the\nphysical world). They necessarily observe ',s.createElement(t.em,null,"partial information"),". They do not get to pause the world\nindefinitely while they think. What “correctness” means here isn’t producing the right answer once — it’s never\nviolating your invariants, ever."),"\n",s.createElement(t.p,null,"Promises are a qualitatively different thing than answers: they’re commitments about what futures remain possible.\nI.e. systems prevent things from happening. ",s.createElement(t.em,null,"Systems rule out futures"),"."),"\n",s.createElement(t.p,null,"In many cases (transaction commit, leader election, scheduling one process before another),\nonce a system rules out a future, that exclusion is permanent. The system has committed."),"\n",s.createElement(t.p,null,"To take an example from my home field of databases, if we have two conflicting concurrent\ntransactions ",s.createElement(t.span,{className:"math math-inline"},s.createElement(t.span,{className:"katex"},s.createElement(t.span,{className:"katex-mathml"},s.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},s.createElement(t.semantics,null,s.createElement(t.mrow,null,s.createElement(t.msub,null,s.createElement(t.mi,null,"T"),s.createElement(t.mn,null,"1")),s.createElement(t.mo,{separator:"true"},","),s.createElement(t.msub,null,s.createElement(t.mi,null,"T"),s.createElement(t.mn,null,"2"))),s.createElement(t.annotation,{encoding:"application/x-tex"},"T_1, T_2")))),s.createElement(t.span,{className:"katex-html","aria-hidden":"true"},s.createElement(t.span,{className:"base"},s.createElement(t.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),s.createElement(t.span,{className:"mord"},s.createElement(t.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),s.createElement(t.span,{className:"msupsub"},s.createElement(t.span,{className:"vlist-t vlist-t2"},s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.3011em"}},s.createElement(t.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"}},s.createElement(t.span,{className:"pstrut",style:{height:"2.7em"}}),s.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},s.createElement(t.span,{className:"mord mtight"},"1")))),s.createElement(t.span,{className:"vlist-s"},"​")),s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.15em"}},s.createElement(t.span)))))),s.createElement(t.span,{className:"mpunct"},","),s.createElement(t.span,{className:"mspace",style:{marginRight:"0.1667em"}}),s.createElement(t.span,{className:"mord"},s.createElement(t.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),s.createElement(t.span,{className:"msupsub"},s.createElement(t.span,{className:"vlist-t vlist-t2"},s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.3011em"}},s.createElement(t.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"}},s.createElement(t.span,{className:"pstrut",style:{height:"2.7em"}}),s.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},s.createElement(t.span,{className:"mord mtight"},"2")))),s.createElement(t.span,{className:"vlist-s"},"​")),s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.15em"}},s.createElement(t.span)))))))))),", the database system must make a hard\nexclusionary promise: if it lets ",s.createElement(t.span,{className:"math math-inline"},s.createElement(t.span,{className:"katex"},s.createElement(t.span,{className:"katex-mathml"},s.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},s.createElement(t.semantics,null,s.createElement(t.mrow,null,s.createElement(t.msub,null,s.createElement(t.mi,null,"T"),s.createElement(t.mn,null,"1"))),s.createElement(t.annotation,{encoding:"application/x-tex"},"T_1")))),s.createElement(t.span,{className:"katex-html","aria-hidden":"true"},s.createElement(t.span,{className:"base"},s.createElement(t.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.createElement(t.span,{className:"mord"},s.createElement(t.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),s.createElement(t.span,{className:"msupsub"},s.createElement(t.span,{className:"vlist-t vlist-t2"},s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.3011em"}},s.createElement(t.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"}},s.createElement(t.span,{className:"pstrut",style:{height:"2.7em"}}),s.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},s.createElement(t.span,{className:"mord mtight"},"1")))),s.createElement(t.span,{className:"vlist-s"},"​")),s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.15em"}},s.createElement(t.span))))))))))," commit, it promises that ",s.createElement(t.span,{className:"math math-inline"},s.createElement(t.span,{className:"katex"},s.createElement(t.span,{className:"katex-mathml"},s.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},s.createElement(t.semantics,null,s.createElement(t.mrow,null,s.createElement(t.msub,null,s.createElement(t.mi,null,"T"),s.createElement(t.mn,null,"2"))),s.createElement(t.annotation,{encoding:"application/x-tex"},"T_2")))),s.createElement(t.span,{className:"katex-html","aria-hidden":"true"},s.createElement(t.span,{className:"base"},s.createElement(t.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.createElement(t.span,{className:"mord"},s.createElement(t.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),s.createElement(t.span,{className:"msupsub"},s.createElement(t.span,{className:"vlist-t vlist-t2"},s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.3011em"}},s.createElement(t.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"}},s.createElement(t.span,{className:"pstrut",style:{height:"2.7em"}}),s.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},s.createElement(t.span,{className:"mord mtight"},"2")))),s.createElement(t.span,{className:"vlist-s"},"​")),s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.15em"}},s.createElement(t.span)))))))))),'\'s writes\nwill never be visible to other transactions. The system "picks a world of histories" that excludes\nhistories where ',s.createElement(t.span,{className:"math math-inline"},s.createElement(t.span,{className:"katex"},s.createElement(t.span,{className:"katex-mathml"},s.createElement(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},s.createElement(t.semantics,null,s.createElement(t.mrow,null,s.createElement(t.msub,null,s.createElement(t.mi,null,"T"),s.createElement(t.mn,null,"2"))),s.createElement(t.annotation,{encoding:"application/x-tex"},"T_2")))),s.createElement(t.span,{className:"katex-html","aria-hidden":"true"},s.createElement(t.span,{className:"base"},s.createElement(t.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),s.createElement(t.span,{className:"mord"},s.createElement(t.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T"),s.createElement(t.span,{className:"msupsub"},s.createElement(t.span,{className:"vlist-t vlist-t2"},s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.3011em"}},s.createElement(t.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"}},s.createElement(t.span,{className:"pstrut",style:{height:"2.7em"}}),s.createElement(t.span,{className:"sizing reset-size6 size3 mtight"},s.createElement(t.span,{className:"mord mtight"},"2")))),s.createElement(t.span,{className:"vlist-s"},"​")),s.createElement(t.span,{className:"vlist-r"},s.createElement(t.span,{className:"vlist",style:{height:"0.15em"}},s.createElement(t.span)))))))))),"'s writes are visible."),"\n",s.createElement(t.h2,null,"Why “Acting Before Understanding” Matters"),"\n",s.createElement(t.p,null,"This is where things get interesting."),"\n",s.createElement(t.p,null,"Algorithms are allowed to wait until everything is well-defined. Systems often aren’t."),"\n",s.createElement(t.p,null,"A database must commit or abort a transaction before it knows what other concurrent transactions may\nwant to do next. A distributed service must respond before it knows which messages\nare delayed. An online learning system must deploy a model before it has seen tomorrow’s data."),"\n",s.createElement(t.p,null,"In each case, the system must act before the world is fully known. That action whittles away possibilities\nuntil only an acceptable outcome is revealed. The meaning of the system\nis defined by removing the negative space, being left with only observable behavior\nthat satisfies the invariants."),"\n",s.createElement(t.blockquote,null,"\n",s.createElement(t.p,null,s.createElement(t.strong,null,"Systems construct meaning like sculptors make art:",s.createElement(t.br),"\n","by chiseling away the negative space in a world of possibilities.")),"\n"),"\n",s.createElement(t.p,null,"This is the common structure behind a lot of familiar problems:"),"\n",s.createElement(t.ul,null,"\n",s.createElement(t.li,null,"coordination"),"\n",s.createElement(t.li,null,"consistency levels"),"\n",s.createElement(t.li,null,"isolation anomalies"),"\n",s.createElement(t.li,null,"optimistic execution"),"\n",s.createElement(t.li,null,"speculative and asynchronous learning"),"\n"),"\n",s.createElement(t.p,null,"They look different on the surface. Underneath, they’re all about deciding which\nfutures to forbid, and when."),"\n",s.createElement(t.p,null,"I plan to keep chipping away at this idea in future posts."))}var m=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.RP)(),e.components);return t?s.createElement(t,e,s.createElement(l,e)):l(e)},r=a(8693),i=a(2532),c=a(4967),o=a(3895),p=a(7528),h=a(6163);const u=e=>{var t;let{data:a,location:n,children:l}=e;const m=a.mdx,p=(null===(t=a.site.siteMetadata)||void 0===t?void 0:t.title)||"Title",u=(0,i.c)(m.frontmatter.coverImage),E=m.frontmatter.coverImageCaption;return s.createElement(o.A,{location:n,title:p},s.createElement("article",{className:"blog-post",itemScope:!0,itemType:"http://schema.org/Article"},s.createElement("header",null,s.createElement("h1",{className:"blog-post-title",itemProp:"headline"},m.frontmatter.title),s.createElement("p",null,m.frontmatter.date," • ",m.fields.readingTime),u&&s.createElement("div",{style:{width:"30%",float:"right",marginLeft:"2rem",marginBottom:"2rem",background:"#fafaff",border:"1px solid #eee",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",padding:"1rem"}},s.createElement(i.G,{image:u,alt:m.frontmatter.title,style:{width:"100%",borderRadius:"4px",marginBottom:E?"0.5rem":"0"}}),E&&E.trim()&&s.createElement("figcaption",{className:"cover-image-caption",style:{textAlign:"left",color:"#666",fontSize:"0.85rem",lineHeight:"1.4",margin:"0"},dangerouslySetInnerHTML:{__html:E}}))),s.createElement("section",{className:"content",itemProp:"articleBody"},l),s.createElement("hr"),s.createElement("footer",null,s.createElement(c.A),s.createElement(h.A))),s.createElement("nav",{className:"blog-post-nav"},s.createElement("ul",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",listStyle:"none",padding:0}},s.createElement("li",null,a.previous&&s.createElement(r.Link,{to:a.previous.fields.slug,rel:"prev"},"← ",a.previous.frontmatter.title)),s.createElement("li",null,a.next&&s.createElement(r.Link,{to:a.next.fields.slug,rel:"next"},a.next.frontmatter.title," →")))))},E=e=>{let{data:t}=e;return s.createElement(p.A,{title:t.mdx.frontmatter.title,description:t.mdx.frontmatter.description||t.mdx.excerpt})};function g(e){return s.createElement(u,e,s.createElement(m,e))}},6163:function(e,t,a){a.d(t,{A:function(){return m}});var n=a(6540),s=a(4848);function l({id:e,host:t,repo:l,repoId:m,category:r,categoryId:i,mapping:c,term:o,strict:p,reactionsEnabled:h,emitMetadata:u,inputPosition:E,theme:g,lang:d,loading:y}){const[f,b]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{f||a.e(416).then(a.bind(a,416)).then((()=>b(!0)))}),[]),f?(0,s.jsx)("giscus-widget",{id:e,host:t,repo:l,repoid:m,category:r,categoryid:i,mapping:c,term:o,strict:p,reactionsenabled:h,emitmetadata:u,inputposition:E,theme:g,lang:d,loading:y}):null}var m=()=>n.createElement("div",{className:"comments-wrapper"},n.createElement(l,{repo:"jhellerstein/blog",repoId:"R_kgDOOlLShQ",category:"Comments",categoryId:"DIC_kwDOOlLShc4CqUp7",mapping:"pathname",term:"Welcome to the async stream blog.",strict:"0",reactionsEnabled:"1",emitMetadata:"0",inputPosition:"bottom",theme:"light",lang:"en",loading:"lazy",crossOrigin:"anonymous",async:!0}))}}]);
//# sourceMappingURL=component---src-templates-blog-post-js-content-file-path-content-blog-algs-systems-index-mdx-3cba791b043688900586.js.map