"use strict";(self.webpackChunkasync_stream_blog=self.webpackChunkasync_stream_blog||[]).push([[851],{8213:function(e,a,t){var n=t(8453),l=t(6540),m=t(33),s=t(8693);function c(e){const a=Object.assign({p:"p",ol:"ol",li:"li",span:"span",em:"em",strong:"strong",blockquote:"blockquote",a:"a",hr:"hr",h2:"h2",h3:"h3",math:"math",semantics:"semantics",mrow:"mrow",mi:"mi",annotation:"annotation",mo:"mo",ul:"ul",div:"div",mspace:"mspace",mtext:"mtext",mtable:"mtable",mtr:"mtr",mtd:"mtd",mstyle:"mstyle",h1:"h1",msub:"msub",mn:"mn"},(0,n.RP)(),e.components);return l.createElement(l.Fragment,null,l.createElement(a.p,null,"The CRDT literature sometimes leaves room for mathematical ambiguity. Maybe because the bulk of the work tends to be targeted at systems researchers and developers, like a lot of work on eventual consistency."),"\n",l.createElement(a.p,null,"The discussion below untangles three subtle but important ideas in CRDT design, which turn out to be interrelated:"),"\n",l.createElement(a.ol,null,"\n",l.createElement(a.li,null,"Determinism vs Convergence guarantees"),"\n",l.createElement(a.li,null,"Early ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}}),"s: lower bounds or not?"),"\n",l.createElement(a.li,null,"Algebraic property requirements for ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," functions."),"\n"),"\n",l.createElement(m.A,{type:"warning"},l.createElement(a.p,null,"The CRDT guarantee of ",l.createElement(a.em,null,"strong eventual consistency does ",l.createElement(a.strong,null,"not")," guarantee determinism!"),"\nIf you want your CRDTs to be deterministic, or you want to treat CRDT ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}}),"s as lower bounds, then your ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," functions must be ",l.createElement(a.strong,null,"inflationary"),".")),"\n",l.createElement(a.blockquote,null,"\n",l.createElement(a.p,null,"This is the 4th post in a ",l.createElement(a.a,{href:"../crdt-intro/"},"series")," I'm doing on CRDTs. This one is a bit more technical and narrow than my previous CRDT posts, but practitioners should still know about the main conclusions. This post also contains a small formal result that seems novel -- Strong Eventual Consistency does not guarantee determinism! I'd be curious to hear about prior work that makes this point."),"\n"),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"Definitions First"),"\n",l.createElement(a.p,null,"Before we get into the details, let's be a bit careful with our terminology. I'll assume you've seen CRDTs before, but I'll review the key points while trying to keep this breezy."),"\n",l.createElement(a.h3,null,"Join Semi-Lattices"),"\n",l.createElement(a.p,null,"You likely remember that CRDTs are related to ",l.createElement(a.em,null,"lattices")," in abstract algebra. Let's review that."),"\n",l.createElement(a.p,null,"Let’s suppose we have a set of possible states ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"))))),", equipped with a ",l.createElement(a.strong,null,"join operator")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,null,"⊔"),l.createElement(a.mo,null,":"),l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"×"),l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"→"),l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\sqcup: S \\times S \\to S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"×"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"→"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"))))),". The join is required to satisfy three properties:"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Idempotent"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"x")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\sqcup x = x")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x")))))),"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Commutative"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"y"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"x")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\sqcup y = y \\sqcup x")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.75em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x")))))),"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Associative"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"y"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"z"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"z")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\sqcup (y \\sqcup z) = (x \\sqcup y) \\sqcup z")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"}},"z"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"}},"z")))))),"\n"),"\n",l.createElement(a.p,null,"If you have a set of states and a binary operator satisfying these properties, you have a ",l.createElement(a.strong,null,"join-semilattice"),"."),"\n",l.createElement(a.p,null,"From this operator, we can define a ",l.createElement(a.strong,null,"partial order"),":"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"y"),l.createElement(a.mspace,{width:"1em"}),l.createElement(a.mtext,null,"iff"),l.createElement(a.mspace,{width:"1em"}),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"y")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\leq y \\quad \\text{iff} \\quad x \\sqcup y = y")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"1em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"iff")),l.createElement(a.span,{className:"mspace",style:{marginRight:"1em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y")))))),"\n",l.createElement(a.p,null,"This means that applying join never forgets anything. It only moves “upward” in the order induced by join."),"\n",l.createElement(a.h3,null,l.createElement(a.strong,null,"From Join Semi-Lattices to CRDTs")),"\n",l.createElement(a.p,null,"A CRDT is essentially a replicated join semi-lattice.\nTo the core mathematical definition we add one more API, an ",l.createElement(a.strong,null,l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," function")," that mutates the state of the CRDT (while of course staying within the state space ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"))))),").  As we'll see below, these functions can be the source of nondeterminism depending on their algebraic properties. Also, the CRDT literature tends to refer to the join operator as ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),". (That works for me, as it disambiguates the CRDT term from the unrelated relational join operator from databases.)"),"\n",l.createElement(a.p,null,"Next, we assume an asynchronous ",l.createElement(a.strong,null,"network dissemination service"),"  that periodically sends a snapshot of one node's state to another. When state arrives at a destination node, its local CRDT state is mutated to reflect the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}})," of the current state with the message. \nWe'll assume that every node eventually ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),"s data from every other node directly or indirectly (transitively)."),"\n",l.createElement(a.p,null,"That's all we need, at the level of detail we'll pursue here. However, the literature on CRDTs typically highlights a subclass of CRDTs called \"op-based\" CRDTs. You can read about those in an ",l.createElement(a.a,{href:"../crdt-turtles"},"earlier post")," and I'll have more to say about them ",l.createElement(a.a,{href:"#op-based"},"below"),"."),"\n",l.createElement(a.p,null,"Given this background, let’s move on to define a key property of functions on the lattice domain."),"\n",l.createElement(a.h3,null,"Inflationary"),"\n",l.createElement(a.p,null,"We say that a function ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"f"),l.createElement(a.mo,null,":"),l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"→"),l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"f:S \\rightarrow S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"→"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S")))))," over an ordered domain ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S")))))," is ",l.createElement(a.strong,null,"inflationary")," if its output is never smaller than its input:"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"f"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\leq f(x)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mclose"},")")))))),"\n",l.createElement(a.p,null,"For CRDT discussion, we assume the domain ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S")))))," is the same as that of our semi-lattice, and the partial order ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,null,"≤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\leq")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mrel"},"≤"))))),'  is the one from our semi-lattice definition. Inflationary functions never take us "down" in the lattice order.'),"\n",l.createElement(m.A,{type:"info"},l.createElement(a.p,null,"Let’s start with something reassuring: the join operator ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\sqcup y")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y")))))," is always inflationary in each of its arguments.")),"\n",l.createElement(a.p,null,"Why?\n",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\leq x \\sqcup y")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y")))))," because ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"y")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\sqcup y")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y")))))," is an upper bound for ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"))))),"."),"\n",l.createElement(a.p,null,"This is one reason why many CRDT papers don’t emphasize inflationarity: they tend to focus on ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}})," operations, and ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}})," (",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,null,"⊔")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\sqcup")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord"},"⊔"))))),") satisfies the property automatically."),"\n",l.createElement(a.p,null,"Our issue is going to be the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," function each node may run between ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),"s. More on that shortly."),"\n",l.createElement(a.p,null,"But first, let's define the standard guarantee that CRDTs are designed to provide."),"\n",l.createElement(a.h3,null,"Strong Eventual Consistency (SEC)"),"\n",l.createElement(a.p,null,"The canonical correctness guarantee for CRDTs is ",l.createElement(a.strong,null,"Strong Eventual Consistency (SEC)"),", as defined by ",l.createElement(a.a,{href:"https://link.springer.com/chapter/10.1007/978-3-642-24550-3_29"},"Shapiro et al"),". It requires that, eventually, all replicas converge to the same state, provided they have seen the same set of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s."),"\n",l.createElement(a.p,null,"The SEC condition includes three properties:"),"\n",l.createElement(a.ol,null,"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Eventual delivery"),": All ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s eventually reach all replicas."),"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Termination"),": All operations eventually complete."),"\n",l.createElement(a.li,null,l.createElement(a.strong,null,"Strong convergence"),": If two replicas have received the same set of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s, they will reach the same state."),"\n"),"\n",l.createElement(a.p,null,"Note that SEC says nothing about ordering of operations; in particular it ",l.createElement(a.strong,null,"does not constrain the interleaving of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," and ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}})),". Given that dissemination is assumed to be asynchronous, a replica might send its current state before or after applying an ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),". We’ll see how this matters next."),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"SEC Does Not Guarantee Determinism"),"\n",l.createElement(a.p,null,"We tend to think of convergence as a property that avoids non-determinism: after all, in a convergent replica system, all the replicas agree on the outcome. But that doesn't actually mean that they agree on a ",l.createElement(a.em,null,"deterministic")," outcome!"),"\n",l.createElement(a.p,null,"As defined, Strong Eventual Consistency only says that replicas converge ",l.createElement(a.em,null,"within")," a run. It says nothing about whether different executions — with the same set of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">updates</code>'}})," and nodes — produce the same final result."),"\n",l.createElement(a.p,null,"Consider the following function:"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mrow,null,l.createElement(a.mo,{fence:"true"},"{"),l.createElement(a.mtable,{rowspacing:"0.36em",columnalign:"left left",columnspacing:"1em"},l.createElement(a.mtr,null,l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mi,null,"a"))),l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mrow,null,l.createElement(a.mtext,null,"if "),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"="),l.createElement(a.mi,{mathvariant:"normal"},"⊤"))))),l.createElement(a.mtr,null,l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mi,null,"x"))),l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mtext,null,"otherwise"))))))),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(x) = \\begin{cases}\na & \\text{if } x = \\top \\\\\nx & \\text{otherwise}\n\\end{cases}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"3em",verticalAlign:"-1.25em"}}),l.createElement(a.span,{className:"minner"},l.createElement(a.span,{className:"mopen delimcenter",style:{top:"0em"}},l.createElement(a.span,{className:"delimsizing size4"},"{")),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mtable"},l.createElement(a.span,{className:"col-align-l"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.69em"}},l.createElement(a.span,{style:{top:"-3.69em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"a"))),l.createElement(a.span,{style:{top:"-2.25em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"x")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.19em"}},l.createElement(a.span))))),l.createElement(a.span,{className:"arraycolsep",style:{width:"1em"}}),l.createElement(a.span,{className:"col-align-l"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.69em"}},l.createElement(a.span,{style:{top:"-3.69em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"if ")),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mord"},"⊤"))),l.createElement(a.span,{style:{top:"-2.25em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"otherwise"))))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.19em"}},l.createElement(a.span))))))),l.createElement(a.span,{className:"mclose nulldelimiter"}))))))),"\n",l.createElement(a.p,null,"The ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),' ("top") symbol is the standard lattice notation for topmost state in a finite lattice (i.e. the unique join of all the states).'),"\n",l.createElement(a.p,null,l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")))))),' is not inflationary: it "drops" from ',l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))," to a lower value ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"))))),". If a user applies it once at node ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">A</code>'}}),", the final result depends on whether ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">A</code>'}})," sends its state to ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">B</code>'}})," ",l.createElement(a.em,null,"before or after")," applying the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"."),"\n",l.createElement(a.p,null,l.createElement(a.strong,null,"Example: Two Possible Outcomes")),"\n",l.createElement(a.p,null,"Let ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"="),l.createElement(a.mo,{stretchy:"false"},"{"),l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},"}")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S = \\{\\bot, a, \\top\\}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"{"),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},"}"))))),", with ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"<"),l.createElement(a.mi,null,"a"),l.createElement(a.mo,null,"<"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot < a < \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7335em",verticalAlign:"-0.0391em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"<"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5782em",verticalAlign:"-0.0391em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"<"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),"."),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,"Node A starts at ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))),"\n",l.createElement(a.li,null,"Node B starts at ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊥")))))),"\n",l.createElement(a.li,null,"A single user applies ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," once on node A"),"\n"),"\n",l.createElement("div",{className:"diagram-two-floats"},l.createElement("div",{className:"diagram-float"},l.createElement("img",{src:(0,s.withPrefix)("/img/crdt-run1.svg"),alt:"Outcome 1",style:{width:"85%",display:"block"}}),l.createElement("div",{className:"diagram-caption"},"Run 1")),l.createElement("div",{className:"diagram-float"},l.createElement("img",{src:(0,s.withPrefix)("/img/crdt-run2.svg"),alt:"Outcome 2",style:{width:"85%",display:"block"}}),l.createElement("div",{className:"diagram-caption"},"Run 2"))),"\n",l.createElement(a.p,null,l.createElement(a.strong,null,"Run 1"),": send first, then ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,"A ",l.createElement(a.strong,null,"sends")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))," to B"),"\n",l.createElement(a.li,null,"B ",l.createElement(a.strong,null,"merges"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,null,"="),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot \\sqcup \\top = \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))),"\n",l.createElement(a.li,null,"A ",l.createElement(a.strong,null,"applies")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,null,":"),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,null,"↦"),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}: \\top \\mapsto a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7054em",verticalAlign:"-0.011em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"↦"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))),"\n",l.createElement(a.li,null,"B ",l.createElement(a.strong,null,"sends")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))," to A"),"\n",l.createElement(a.li,null,"A ",l.createElement(a.strong,null,"merges"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,null,"="),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a \\sqcup \\top = \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5556em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))),"\n",l.createElement(a.li,null,"Final state: A = ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),", B = ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))),"\n"),"\n",l.createElement(a.p,null,l.createElement(a.strong,null,"Run 2"),": ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," first, then send"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,"A ",l.createElement(a.strong,null,"applies")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,null,":"),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,null,"↦"),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}: \\top \\mapsto a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7054em",verticalAlign:"-0.011em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"↦"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))),"\n",l.createElement(a.li,null,"A ",l.createElement(a.strong,null,"sends")," ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))," to B"),"\n",l.createElement(a.li,null,"B ",l.createElement(a.strong,null,"merges"),": ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"⊔"),l.createElement(a.mi,null,"a"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot \\sqcup a = a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"⊔"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))),"\n",l.createElement(a.li,null,"Final state: A = ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"))))),", B = ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))),"\n"),"\n",l.createElement(a.p,null,"Same updates. Same nodes. Same messages. Different orders. Two different converged states."),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"Inflationarity is Needed for Deterministic Convergence"),"\n",l.createElement(a.p,null,"As we've seen, non-inflationary functions like ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")))))),"  may non-deterministically drive the CRDT into one of many possible converged states, which depend on the interleaving of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s and messages."),"\n",l.createElement(a.p,null,"If all ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),'s are inflationary, then once a state has moved "up" the lattice, it never moves back down — and that ensures:'),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,"Each replica's state moves up the lattice."),"\n",l.createElement(a.li,null,"Merging always moves replicas up in the lattice."),"\n",l.createElement(a.li,null,"The final state is the least upper bound of all ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s."),"\n"),"\n",l.createElement(a.p,null,"That last point ensures ",l.createElement(a.strong,null,"determinism"),": the final result depends only on the set of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s, not their timing."),"\n",l.createElement(m.A,{type:"warning"},l.createElement(a.p,null,l.createElement(a.strong,null,"Inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s are required for deterministic convergence in CRDTs."))),"\n",l.createElement(a.p,null,"Non-inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s will still converge to some common state, but the choice of converged state will be non-deterministic."),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"Non-Inflationary Updates Spoil Lower Bounds"),"\n",l.createElement(a.p,null,"In ",l.createElement(a.a,{href:"../crdt-dont-read"},"the previous post")," I talked about how it's unsafe to ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}}),' the naked state of a CRDT, but at least\na "well-behaved" CRDT provides lower bounds. Well, in addition to providing non-deterministic outcomes,\n',l.createElement(a.strong,null,"non-inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),'s are "ill-behaved" and do ',l.createElement(a.em,null,"not")," provide lower bounds"),"."),"\n",l.createElement(a.p,null,"Imagine you're writing application logic that reads from a CRDT value during execution."),"\n",l.createElement(a.p,null,"If the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," function is inflationary, you have a guarantee: the current state always provides a ",l.createElement(a.strong,null,"lower bound")," of the final state. That makes it safe to make assumptions like:"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,'"This user will never lose this permission."'),"\n",l.createElement(a.li,null,'"This counter will only increase from here."'),"\n"),"\n",l.createElement(a.p,null,"But if ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"s are ",l.createElement(a.strong,null,"not")," inflationary, those assumptions no longer hold. You might see a high value now — and a lower one later — because your node applied a non-inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"."),"\n",l.createElement(a.p,null,"That means your application can't treat CRDT reads as stable observations in any sense. It must treat every intermediate value as potentially temporary."),"\n",l.createElement(m.A,{type:"danger"},l.createElement(a.p,null,"When using non-inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," functions, CRDT ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}})," values can be completely arbitrary. Inflationary ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," ensures that CRDT ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}})," is a lower bound on the final converged state, which is a common assumption in the CRDT literature.")),"\n",l.createElement("br"),"\n",l.createElement("br"),"\n",l.createElement(a.h3,null,"Ensuring Inflationarity"),"\n",l.createElement(a.p,null,"There is a simple hack to ensure inflationarity, by changing the implementation of the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," API, or removing it entirely."),"\n",l.createElement(a.p,null,"The change is as follows. When a user invokes ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update(x)</code>'}}),", we do not directly mutate the CRDT state to ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">x</code>'}}),"; rather, we mutate the state to ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge(update(x))</code>'}}),". Because ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),' is inflationary (as discussed above), the effect of updates in this implementation is always inflationary.\nThe result is determinism and guaranteed lower bounds, at the cost of a slightly surprising instant/"local" effect from ',l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),"."),"\n",l.createElement(a.p,null,"If you want the contract with the CRDT programmer to be more explicit, you can simply remove ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," from the API and force developers to invoke ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}})," locally. This is nearly the same as the above design, except for type signatures:"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,null,":"),l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"→"),l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},": S \\to S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"→"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S")))))),"\n",l.createElement(a.li,null,l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,null,":"),l.createElement(a.mi,null,"U"),l.createElement(a.mo,null,"→"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"→"),l.createElement(a.mi,null,"S"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},": U \\to (S \\to S)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mrel"},":"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"}},"U"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"→"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"→"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mclose"},")")))))),"\n"),"\n",l.createElement(a.p,null,"That is, ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," can take values from some other domain ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"U")),l.createElement(a.annotation,{encoding:"application/x-tex"},"U")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"}},"U")))))," and map them into mutations to ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"))))),". Removing the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}}),' API  requires programmers to do that mapping at application level, but is more transparent about a semantics that "',l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),' always happens immediately to ensure inflationarity".'),"\n",l.createElement(a.hr),"\n",l.createElement(a.h1,null,"Additional Technical Material"),"\n",l.createElement(a.p,null,"Just in case the above wasn't enough for you, here are a few more points that may be of interest to aficionados!"),"\n",l.createElement(a.h2,null,l.createElement("a",{id:"op-based"}," ")," Brief Note: Op-Based CRDTs are Deterministic"),"\n",l.createElement(a.p,null,"In ",l.createElement(a.a,{href:"../crdt-turtles#op-based"},"a previous post")," I explained how a fully-specified Op-Based CRDT is a join semi-lattice of a particular kind: a grow-only set lattice over the powerset ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"P"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"C"),l.createElement(a.mo,null,"×"),l.createElement(a.mi,null,"O"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"P(C \\times O)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"}},"C"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}}),l.createElement(a.span,{className:"mbin"},"×"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2222em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"),l.createElement(a.span,{className:"mclose"},")")))))," containing tuples ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.msub,null,l.createElement(a.mi,null,"c"),l.createElement(a.mi,null,"i")),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.msub,null,l.createElement(a.mi,null,"o"),l.createElement(a.mi,null,"i")),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"(c_i, o_i)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"c"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3117em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"i")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"o"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3117em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"i")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mclose"},")"))))),", each comprised of a ",l.createElement(a.strong,null,"causal context lattice")," of type ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"C")),l.createElement(a.annotation,{encoding:"application/x-tex"},"C")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"}},"C")))))," and a value from a domain of mutually commutative operations ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"O")),l.createElement(a.annotation,{encoding:"application/x-tex"},"O")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O"))))),'. The "causal context" is typically a vector clock or DAG that dictates which of the other items in the set precede this one in a partial order.'),"\n",l.createElement(a.p,null,"At a gloss, the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">update</code>'}})," function of an op-based CRDT takes as input an op ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.msub,null,l.createElement(a.mi,null,"o"),l.createElement(a.mi,null,"i")),l.createElement(a.mo,null,"∈"),l.createElement(a.mi,null,"O")),l.createElement(a.annotation,{encoding:"application/x-tex"},"o_i \\in O")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6891em",verticalAlign:"-0.15em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"o"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3117em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"i")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"∈"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"}},"O")))))," and does the following:"),"\n",l.createElement(a.ol,null,"\n",l.createElement(a.li,null,"increment the local causal context to ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.msub,null,l.createElement(a.mi,null,"c"),l.createElement(a.mrow,null,l.createElement(a.mi,null,"t"),l.createElement(a.mo,null,"+"),l.createElement(a.mn,null,"1")))),l.createElement(a.annotation,{encoding:"application/x-tex"},"c_{t+1}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.2083em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"c"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3011em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"t"),l.createElement(a.span,{className:"mbin mtight"},"+"),l.createElement(a.span,{className:"mord mtight"},"1"))))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.2083em"}},l.createElement(a.span))))))))))," (e.g. a new vector clock value with the local nodeId's value incremented)"),"\n",l.createElement(a.li,null,"add a tuple ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.msub,null,l.createElement(a.mi,null,"c"),l.createElement(a.mrow,null,l.createElement(a.mi,null,"t"),l.createElement(a.mo,null,"+"),l.createElement(a.mn,null,"1"))),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.msub,null,l.createElement(a.mi,null,"o"),l.createElement(a.mi,null,"i")),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"(c_{t+1}, o_i)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"c"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3011em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"t"),l.createElement(a.span,{className:"mbin mtight"},"+"),l.createElement(a.span,{className:"mord mtight"},"1"))))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.2083em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"o"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3117em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mathnormal mtight"},"i")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mclose"},")")))))," to the local set"),"\n"),"\n",l.createElement(a.p,null,'This is clearly inflationary. From the semi-lattice perspective, we are simply adding an element to a set, so the result of update is a "bigger" set. Similarly, the underlying causal history is growing: 1 node is added, some precedences are added to the causal context, and nothing is taken away.'),"\n",l.createElement(a.p,null,'There are some nuances around "expiring" history from the partial order of ops that I discuss in that same post; they do not change the inflationary nature of Op-Based CRDTs.'),"\n",l.createElement(m.A,{type:"info"},l.createElement(a.p,null,l.createElement(a.strong,null,"Op-Based CRDTs are deterministic"),", because their updates are inflationary by definition.")),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"What About Monotonicity?"),"\n",l.createElement(a.p,null,'If you know of me from the CALM Conjecture, you might be suprised that I haven\'t used the "M" word yet: ',l.createElement(a.strong,null,"monotonicity"),". In fact, many authors in this space—myself included—have been imprecise in when we use monotonicity vs inflationarity. Let me clear this up here in this context."),"\n",l.createElement(a.p,null,"We should start with crisp definitions."),"\n",l.createElement(a.h3,null,"Monotonicity"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"y"),l.createElement(a.mspace,{width:"1em"}),l.createElement(a.mo,null,"⇒"),l.createElement(a.mspace,{width:"1em"}),l.createElement(a.mi,null,"f"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"f"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"y"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\leq y \\quad \\Rightarrow \\quad f(x) \\leq f(y)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mspace",style:{marginRight:"1em"}}),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"⇒"),l.createElement(a.span,{className:"mspace",style:{marginRight:"1em"}}),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"}},"y"),l.createElement(a.span,{className:"mclose"},")")))))),"\n",l.createElement(a.p,null,"Monotonicity is a ",l.createElement(a.strong,null,"relational property"),": it relates how the ordering on inputs maps to the ordering on outputs. At a gloss, it ensures that the more you put into the input, the more you get in the output."),"\n",l.createElement(a.h3,null,"Inflationarity"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"f"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"x \\leq f(x)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mclose"},")")))))),"\n",l.createElement(a.p,null,"Inflationarity is a ",l.createElement(a.strong,null,"pointwise property"),": it compares each input directly to its own output. It ensures that applying the function doesn't discard information from its input."),"\n",l.createElement(a.h3,null,"So What?"),"\n",l.createElement(a.p,null,"Well first off, you should know that these two properties are orthogonal: there are functions that are neither, either, or both."),"\n",l.createElement(a.p,null,"Going back to our ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," function. Recall the definition:"),"\n",l.createElement(a.div,{className:"math math-display"},l.createElement(a.span,{className:"katex-display"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"x"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mrow,null,l.createElement(a.mo,{fence:"true"},"{"),l.createElement(a.mtable,{rowspacing:"0.36em",columnalign:"left left",columnspacing:"1em"},l.createElement(a.mtr,null,l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mi,null,"a"))),l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mrow,null,l.createElement(a.mtext,null,"if "),l.createElement(a.mi,null,"x"),l.createElement(a.mo,null,"="),l.createElement(a.mi,{mathvariant:"normal"},"⊤"))))),l.createElement(a.mtr,null,l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mi,null,"x"))),l.createElement(a.mtd,null,l.createElement(a.mstyle,{scriptlevel:"0",displaystyle:"false"},l.createElement(a.mtext,null,"otherwise"))))))),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(x) = \\begin{cases}\na & \\text{if } x = \\top \\\\\nx & \\text{otherwise}\n\\end{cases}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"3em",verticalAlign:"-1.25em"}}),l.createElement(a.span,{className:"minner"},l.createElement(a.span,{className:"mopen delimcenter",style:{top:"0em"}},l.createElement(a.span,{className:"delimsizing size4"},"{")),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mtable"},l.createElement(a.span,{className:"col-align-l"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.69em"}},l.createElement(a.span,{style:{top:"-3.69em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"a"))),l.createElement(a.span,{style:{top:"-2.25em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal"},"x")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.19em"}},l.createElement(a.span))))),l.createElement(a.span,{className:"arraycolsep",style:{width:"1em"}}),l.createElement(a.span,{className:"col-align-l"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.69em"}},l.createElement(a.span,{style:{top:"-3.69em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"if ")),l.createElement(a.span,{className:"mord mathnormal"},"x"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mord"},"⊤"))),l.createElement(a.span,{style:{top:"-2.25em"}},l.createElement(a.span,{className:"pstrut",style:{height:"3.008em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"otherwise"))))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"1.19em"}},l.createElement(a.span))))))),l.createElement(a.span,{className:"mclose nulldelimiter"}))))))),"\n",l.createElement(a.p,null,"This is clearly non-inflationary, assuming ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a"),l.createElement(a.mo,{mathvariant:"normal"},"≠"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a \\ne \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},l.createElement(a.span,{className:"mrel"},l.createElement(a.span,{className:"mord vbox"},l.createElement(a.span,{className:"thinbox"},l.createElement(a.span,{className:"rlap"},l.createElement(a.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"inner"},l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mrel"},""))),l.createElement(a.span,{className:"fix"}))))),l.createElement(a.span,{className:"mrel"},"=")),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),"."),"\n",l.createElement("div",{className:"diagram-float"},l.createElement("img",{src:(0,s.withPrefix)("/img/3-element.svg"),alt:"DropTop on a 3-element domain",style:{display:"block",maxHeight:"120px"}})),"\n",l.createElement(a.p,null,"Let's consider ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," over the domain ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"="),l.createElement(a.mo,{stretchy:"false"},"{"),l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},"}")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S = \\{\\bot, a, \\top\\}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"{"),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},"}")))))," where ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"<"),l.createElement(a.mi,null,"a"),l.createElement(a.mo,null,"<"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot \\lt a \\lt \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7335em",verticalAlign:"-0.0391em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"<"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.5782em",verticalAlign:"-0.0391em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"<"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),". In this case, we have a non-inflationary function that ",l.createElement(a.em,null,"is")," monotonic!  Let's work out the details:"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot \\leq a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))," and ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"≤"),l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(\\bot) \\leq \\text{DropTop}(a)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mclose"},")")))))),"\n",l.createElement(a.li,null,l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a \\leq \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤")))))," and ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"≤"),l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(a)\\leq \\text{DropTop}(\\top)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},")"))))),", because ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(a) = \\text{DropTop}(\\top) = a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"))))),"."),"\n"),"\n",l.createElement(a.p,null,"We've seen above that ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," leads to non-determinism over the totally ordered domain ",l.createElement(a.em,null,"even though")," it is monotonic."),"\n",l.createElement(a.p,null,"But here's a funny thing: consider the same function over the domain ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"S"),l.createElement(a.mo,null,"="),l.createElement(a.mo,{stretchy:"false"},"{"),l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,null,"b"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},"}")),l.createElement(a.annotation,{encoding:"application/x-tex"},"S = \\{\\bot, a, b, \\top\\}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6833em"}}),l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"{"),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord mathnormal"},"b"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},"}"))))),", where the join generates a partial order ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,{mathvariant:"normal"},"⊥"),l.createElement(a.mo,null,"≤"),l.createElement(a.mo,{stretchy:"false"},"{"),l.createElement(a.mi,null,"a"),l.createElement(a.mo,{separator:"true"},","),l.createElement(a.mi,null,"b"),l.createElement(a.mo,{stretchy:"false"},"}"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\bot \\leq \\{a, b\\} \\leq \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord"},"⊥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mopen"},"{"),l.createElement(a.span,{className:"mord mathnormal"},"a"),l.createElement(a.span,{className:"mpunct"},","),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.1667em"}}),l.createElement(a.span,{className:"mord mathnormal"},"b"),l.createElement(a.span,{className:"mclose"},"}"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),":"),"\n",l.createElement("div",{className:"diagram-float"},l.createElement("img",{src:(0,s.withPrefix)("/img/4-element.svg"),alt:"DropTop on a 4-element domain",style:{display:"block",maxHeight:"120px"}})),"\n",l.createElement(a.p,null,"In this domain, ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," is ",l.createElement(a.strong,null,"non-monotonic!"),".  To see it, consider that:"),"\n",l.createElement(a.ul,null,"\n",l.createElement(a.li,null,l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"b"),l.createElement(a.mo,null,"≤"),l.createElement(a.mi,{mathvariant:"normal"},"⊤")),l.createElement(a.annotation,{encoding:"application/x-tex"}," b \\leq \\top")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8304em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mord mathnormal"},"b"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord"},"⊤"))))),", but ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,null,"b"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"≰"),l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},")")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(b) \\not\\leq \\text{DropTop}(\\top)")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord mathnormal"},"b"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},l.createElement(a.span,{className:"mord vbox"},l.createElement(a.span,{className:"thinbox"},l.createElement(a.span,{className:"rlap"},l.createElement(a.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"inner"},l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mrel"},""))),l.createElement(a.span,{className:"fix"})))))),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.7719em",verticalAlign:"-0.136em"}}),l.createElement(a.span,{className:"mrel"},"≤"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},")")))))," because ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop"),l.createElement(a.mo,{stretchy:"false"},"("),l.createElement(a.mi,{mathvariant:"normal"},"⊤"),l.createElement(a.mo,{stretchy:"false"},")"),l.createElement(a.mo,null,"="),l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}(\\top) = a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop")),l.createElement(a.span,{className:"mopen"},"("),l.createElement(a.span,{className:"mord"},"⊤"),l.createElement(a.span,{className:"mclose"},")"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"="),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a"))))),", and ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"a")),l.createElement(a.annotation,{encoding:"application/x-tex"},"a")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.4306em"}}),l.createElement(a.span,{className:"mord mathnormal"},"a")))))," and ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mi,null,"b")),l.createElement(a.annotation,{encoding:"application/x-tex"},"b")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.6944em"}}),l.createElement(a.span,{className:"mord mathnormal"},"b"))))),"  are incomparable!"),"\n"),"\n",l.createElement(a.p,null,"The same scenario we used to show that ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," leads to non-determinism in the previous totally-ordered domain shows it leads to non-determinism over this partially ordered domain, where it ",l.createElement(a.em,null,"is non-monotonic"),"."),"\n",l.createElement(a.p,null,"So: one monotonic example, one non-monotonic example. Neither is inflationary, and both lead to non-deterministic outcomes!  The relevant issue in this situation should now be clear: ",l.createElement(a.strong,null,"updates need to be inflationary to achieve deterministic outcomes; monotonicity of update functions is irrelevant to determinism"),"."),"\n",l.createElement(a.h3,null,"How Does this Relate to the CALM Theorem?"),"\n",l.createElement(a.p,null,"Great question! First, as a member of the University of California faculty, I'd be happy to change the name to the CALI Theorem if inflation were the key property, rather than monotonicity!"),"\n",l.createElement(a.p,null,"But we should stay CALM."),"\n",l.createElement(a.p,null,'The "type signatures" of these two terms give us a hint as to when we use them. Inflationarity is a property that only makes sense on functions from a domain to itself (',l.createElement(a.em,null,"endofunctions"),", if you like fancy math terms). Monotonicity is a property that we can define without regard for the domain and range of a function."),"\n",l.createElement(a.p,null,"CRDTs are scoped as abstract data types, and hence mostly just capture transformations from state to state within a single domain. Hence inflationarity is an appropriate lens for them."),"\n",l.createElement(a.p,null,"The CALM Theorem reasons about entire programs, and as such it cannot be defined in terms of inflationarity alone. Usually we want to talk about inflation of inputs to the program over time, and monotonicity of the logic that the program applies to those inputs to produce outputs that may well be in another domain. This is not a new observation; this distinction was made carefully by Ameloot, Neven and van Den Bussche in their ",l.createElement(a.a,{href:"https://dl.acm.org/doi/10.1145/1989284.1989321"},"first proof of the CALM Theorem"),"."),"\n",l.createElement(a.p,null,"Returning to CRDTs, it's easy to show that ",l.createElement(a.strong,null,"semi-lattice join is monotonic")," in both inputs. We can also observe that ",l.createElement(a.em,null,"CRDTs are both inflationary and monotonic in their final, converged outcomes"),": if you run a CRDT to convergence on some set of updates ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.msub,null,l.createElement(a.mi,null,"U"),l.createElement(a.mn,null,"1"))),l.createElement(a.annotation,{encoding:"application/x-tex"},"U_1")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"}},"U"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3011em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mtight"},"1")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))))))),", and then run it again to convergence on a set of updates ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.msub,null,l.createElement(a.mi,null,"U"),l.createElement(a.mn,null,"2")),l.createElement(a.mo,null,"≥"),l.createElement(a.msub,null,l.createElement(a.mi,null,"U"),l.createElement(a.mn,null,"1"))),l.createElement(a.annotation,{encoding:"application/x-tex"},"U_2 \\geq U_1")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"}},"U"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3011em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mtight"},"2")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}}),l.createElement(a.span,{className:"mrel"},"≥"),l.createElement(a.span,{className:"mspace",style:{marginRight:"0.2778em"}})),l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),l.createElement(a.span,{className:"mord"},l.createElement(a.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"}},"U"),l.createElement(a.span,{className:"msupsub"},l.createElement(a.span,{className:"vlist-t vlist-t2"},l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.3011em"}},l.createElement(a.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"}},l.createElement(a.span,{className:"pstrut",style:{height:"2.7em"}}),l.createElement(a.span,{className:"sizing reset-size6 size3 mtight"},l.createElement(a.span,{className:"mord mtight"},"1")))),l.createElement(a.span,{className:"vlist-s"},"​")),l.createElement(a.span,{className:"vlist-r"},l.createElement(a.span,{className:"vlist",style:{height:"0.15em"}},l.createElement(a.span)))))))))),", you'll find the the outcome of the second run is no lower in the lattice than the outcome of the first run—even if your update functions are non-inflationary!"),"\n",l.createElement(a.hr),"\n",l.createElement(a.h2,null,"Want More?"),"\n",l.createElement(a.p,null,"This is not the first writing that distinguishes between inflationary and monotonic functions in the context of distributed or parallel computing."),"\n",l.createElement(a.p,null,"Here are a couple interesting and relevant prior references I've found. I'd love to know of others!"),"\n",l.createElement(a.p,null,l.createElement(a.a,{href:"https://dl.acm.org/doi/10.1145/2502323.2502326"},"LVars")," inventor ",l.createElement(a.strong,null,"Lindsey Kuper")," has a 2015 blog post, ",l.createElement(a.em,null,l.createElement(a.a,{href:"https://decomposition.al/blog/2015/08/31/whats-the-difference-between-inflationary-and-monotonic-functions/"},"What’s the difference between inflationary and monotonic functions?"))," that highlights the confusion many have regarding inflationarity and monotonicity, and gives intuitive examples to demonstrate that they are orthogonal properties."),"\n",l.createElement(a.p,null,l.createElement(a.strong,null,"Almeida et al.")," recently published a CRDT survey (",l.createElement(a.em,null,l.createElement(a.a,{href:"https://dl.acm.org/doi/10.1145/3695249"},"Computing Surveys, 2023")),") that includes a discussion of ",l.createElement(a.strong,null,"inflationary")," and ",l.createElement(a.strong,null,"monotonic")," updates, and argues that prior work erroneously demanded monotonic update functions, when it should have demanded inflationary functions. In fact, as we discuss above, the SEC guarantee of CRDTs does not demand inflationarity or monotonicity of update! Inflationarity is only necessary if we want determinism or lower bounds (monotonicity of ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">read</code>'}}),"). Moreover, their example (page 18) of a monotonic but non-inflationary function is ",l.createElement(a.em,null,"decrement"),", which is a bit confusing: decrement can be inflationary in some contexts (e.g. a countdown timer based on natural numbers with ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">min</code>'}})," as the ",l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">merge</code>'}}),' function), but anti-inflationary ("deflationary?") in other contexts (e.g. a typical integer/',l.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">max</code>'}})," counter semi-lattice.) It's nicer to have an example like ",l.createElement(a.span,{className:"math math-inline"},l.createElement(a.span,{className:"katex"},l.createElement(a.span,{className:"katex-mathml"},l.createElement(a.math,{xmlns:"http://www.w3.org/1998/Math/MathML"},l.createElement(a.semantics,null,l.createElement(a.mrow,null,l.createElement(a.mtext,null,"DropTop")),l.createElement(a.annotation,{encoding:"application/x-tex"},"\\text{DropTop}")))),l.createElement(a.span,{className:"katex-html","aria-hidden":"true"},l.createElement(a.span,{className:"base"},l.createElement(a.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),l.createElement(a.span,{className:"mord text"},l.createElement(a.span,{className:"mord"},"DropTop"))))))," that is neither inflationary nor anti-inflationary, and which separates inflationarity and monotonicity directly (by simply expanding the domain)."),"\n",l.createElement(a.p,null,"I am not aware of prior CRDT literature that explicitly discusses the idea that inflationarity is a requirement for deterministic convergence under SEC. If you know of such work, please link to it in a comment below, or reach out if you don't have a github account!"),"\n",l.createElement(a.blockquote,null,"\n",l.createElement(a.p,null,"Thanks to ",l.createElement(a.a,{href:"https://www.linkedin.com/in/conorpower23/"},"Conor Power")," for sparking my interest in this topic and providing sanity checks on early drafts of this post."),"\n"))}a.A=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,n.RP)(),e.components);return a?l.createElement(a,e,l.createElement(c,e)):c(e)}}}]);
//# sourceMappingURL=c9f37a38-405ce06ef8cfc6ab4822.js.map